<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Home Dev — HTML • CSS • JS</title>
<meta name="theme-color" content="#0f172a">
<style>
  :root{
    --bg:#0b1220; --panel:#0f172a; --muted:#94a3b8; --text:#e2e8f0; --acc:#22d3ee; --ok:#22c55e; --warn:#eab308; --bad:#ef4444;
    --shadow:0 6px 24px rgba(2,6,23,.35);
    --radius:16px;
    --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    --sans: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  }
  [data-theme="light"]{
    --bg:#f8fafc; --panel:#ffffff; --muted:#64748b; --text:#0f172a; --acc:#0ea5e9;
    --shadow:0 6px 24px rgba(2,6,23,.08);
  }
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1200px 900px at 80% -10%, rgba(34,211,238,.10), transparent 60%),
    radial-gradient(1000px 800px at -10% 10%, rgba(99,102,241,.10), transparent 60%), var(--bg);
    color:var(--text); font-family:var(--sans); line-height:1.45; letter-spacing:.25px;
  }
  .wrap{max-width:1200px; margin:0 auto; padding:24px}
  header{
    display:flex; gap:16px; align-items:center; justify-content:space-between; margin-bottom:18px;
  }
  .brand{display:flex; align-items:center; gap:12px}
  .logo{width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,#22d3ee,#6366f1); box-shadow:var(--shadow)}
  h1{margin:0; font-size:20px; letter-spacing:.3px}
  .actions{display:flex; gap:8px; flex-wrap:wrap}
  button, .btn{
    appearance:none; border:1px solid rgba(148,163,184,.25); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0));
    color:var(--text); padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600;
    box-shadow: var(--shadow); transition: transform .05s ease-in-out, border-color .2s;
  }
  button:hover{border-color: rgba(34,211,238,.6)}
  button:active{transform: translateY(1px)}
  .grid{
    display:grid; gap:16px;
    grid-template-columns: repeat(12, 1fr);
  }
  .card{grid-column: span 6; background:var(--panel); border:1px solid rgba(148,163,184,.15); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px 14px 12px}
  .card.sm{grid-column: span 4}
  .card.lg{grid-column: span 12}
  .card h2{margin:4px 0 10px; font-size:14px; text-transform:uppercase; letter-spacing:1px; color:var(--muted)}
  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .muted{color:var(--muted)}
  .kbd{font-family:var(--mono); font-size:12px; padding:2px 6px; border-radius:8px; border:1px solid rgba(148,163,184,.25)}
  textarea, input, select{
    width:100%; border:1px solid rgba(148,163,184,.25); border-radius:12px; background:transparent; color:var(--text); padding:10px 12px; font-family:var(--mono)
  }
  textarea{min-height:160px; resize:vertical}
  .cols{display:grid; grid-template-columns:1fr 1fr; gap:8px}
  .list{display:grid; gap:6px; margin:0; padding:0; list-style:none}
  .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid rgba(148,163,184,.25)}
  .status{width:8px; height:8px; border-radius:999px}
  .ok{background:var(--ok)} .warn{background:var(--warn)} .bad{background:var(--bad)}
  .table{width:100%; border-collapse:separate; border-spacing:0 8px; font-family:var(--mono); font-size:12px}
  .table td{padding:8px 10px; background:rgba(15,23,42,.35); border:1px solid rgba(148,163,184,.15)}
  .table td:first-child{border-top-left-radius:10px; border-bottom-left-radius:10px; color:var(--muted)}
  .table td:last-child{border-top-right-radius:10px; border-bottom-right-radius:10px}
  .preview{width:100%; height:280px; border:1px dashed rgba(148,163,184,.35); border-radius:12px}
  .hint{font-size:12px; color:var(--muted)}
  .link{color:var(--acc); text-decoration:none}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{padding:6px 10px; border-radius:999px; border:1px solid rgba(148,163,184,.25); cursor:pointer}
  .kanban{display:grid; grid-template-columns: repeat(3, 1fr); gap:8px}
  .col{background:rgba(15,23,42,.35); padding:8px; border-radius:12px; min-height:140px}
  .col h3{margin:0 0 6px; font-size:13px; color:var(--muted)}
  .task{background:rgba(255,255,255,.03); border:1px solid rgba(148,163,184,.2); padding:8px; border-radius:10px; margin-bottom:6px; cursor:grab}
  .footer{margin-top:12px; font-size:12px; color:var(--muted); display:flex; gap:8px; justify-content:space-between; flex-wrap:wrap}
  @media (max-width:980px){
    .card{grid-column: span 12}
    .card.sm{grid-column: span 12}
  }
</style>
</head>
<body>
  <div class="wrap" id="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Home Dev</h1>
          <div class="muted" id="clock">--:--</div>
        </div>
      </div>
      <div class="actions">
        <button id="theme">Tema</button>
        <button id="clearLocal">Limpar dados</button>
        <button id="exportData">Exportar</button>
        <label class="btn" for="importFile">Importar</label>
        <input id="importFile" type="file" accept="application/json" hidden />
      </div>
    </header>

    <div class="grid">
      <!-- Projeto Rápido -->
      <section class="card lg" id="quick">
        <h2>Projeto Rápido</h2>
        <div class="row">
          <input id="projName" placeholder="Nome do arquivo ex: demo.html" />
          <button id="makeFile">Gerar arquivo</button>
          <a id="dlLink" class="btn" download hidden>Baixar</a>
        </div>
        <div class="cols" style="margin-top:8px">
          <textarea id="projHtml" placeholder="HTML"></textarea>
          <textarea id="projJs" placeholder="JS"></textarea>
        </div>
        <iframe id="projPreview" class="preview" sandbox="allow-scripts"></iframe>
        <div class="hint">Atalhos: <span class="kbd">Ctrl/⌘ + Enter</span> executa. <span class="kbd">Ctrl/⌘ + S</span> baixa.</div>
      </section>

      <!-- Snippets -->
      <section class="card sm" id="snippets">
        <h2>Snippets</h2>
        <div class="row">
          <select id="snipSelect"></select>
          <button id="runSnip">Rodar</button>
          <button id="saveSnip">Salvar</button>
        </div>
        <textarea id="snipCode" placeholder="// JS aqui"></textarea>
        <ul class="list" id="snipList"></ul>
      </section>

      <!-- Notas -->
      <section class="card sm" id="notes">
        <h2>Notas</h2>
        <textarea id="note"></textarea>
        <div class="row">
          <button id="saveNote">Salvar</button>
          <span class="muted hint">Auto salva a cada 3s</span>
        </div>
      </section>

      <!-- Links do Projeto -->
      <section class="card sm" id="links">
        <h2>Links</h2>
        <div class="row">
          <input id="linkTitle" placeholder="Título" />
          <input id="linkUrl" placeholder="URL" />
          <button id="addLink">Adicionar</button>
        </div>
        <ul class="list" id="linkList"></ul>
      </section>

      <!-- Kanban mínimo -->
      <section class="card sm" id="kanban">
        <h2>Kanban</h2>
        <div class="kanban">
          <div class="col" data-col="todo"><h3>Todo</h3></div>
          <div class="col" data-col="doing"><h3>Doing</h3></div>
          <div class="col" data-col="done"><h3>Done</h3></div>
        </div>
        <div class="row" style="margin-top:8px">
          <input id="taskText" placeholder="Tarefa" />
          <button id="addTask">Criar</button>
        </div>
      </section>

      <!-- Ping -->
      <section class="card sm" id="ping">
        <h2>Ping HTTP</h2>
        <div class="row">
          <input id="pingUrl" placeholder="https://..." />
          <button id="doPing">Ping</button>
        </div>
        <table class="table" id="pingTable"></table>
      </section>

      <!-- Paleta -->
      <section class="card sm" id="palette">
        <h2>Paleta</h2>
        <div class="row">
          <input type="color" id="baseColor" value="#22d3ee"/>
          <button id="genPalette">Gerar</button>
        </div>
        <div class="chips" id="chipArea"></div>
      </section>

      <!-- Cheats -->
      <section class="card sm" id="cheats">
        <h2>Cheats</h2>
        <table class="table">
          <tr><td>Servidor local</td><td><code>python3 -m http.server 8080</code></td></tr>
          <tr><td>Live reload simples</td><td><code>fswatch . | xargs -n1 -I{} touch reload.flag</code></td></tr>
          <tr><td>Git init</td><td><code>git init && git add . && git commit -m "init"</code></td></tr>
          <tr><td>Node http</td><td><code>npx http-server -p 8080</code></td></tr>
        </table>
      </section>
    </div>

    <div class="footer">
      <div>Armazena no <strong>localStorage</strong>. Exporta e importa JSON.</div>
      <div>Atalhos globais: <span class="kbd">F2</span> tema, <span class="kbd">/</span> foco busca links.</div>
    </div>
  </div>

<script>
(function(){
  const $ = (sel, el=document)=>el.querySelector(sel);
  const $all = (sel, el=document)=>Array.from(el.querySelectorAll(sel));

  const state = {
    theme: localStorage.getItem("home.theme") || (matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"),
    note: localStorage.getItem("home.note") || "",
    links: JSON.parse(localStorage.getItem("home.links")||"[]"),
    snips: JSON.parse(localStorage.getItem("home.snips")||"[]"),
    kanban: JSON.parse(localStorage.getItem("home.kanban")||'{"todo":[],"doing":[],"done":[]}'),
  };
  document.documentElement.setAttribute("data-theme", state.theme);

  // Clock
  const clock = ()=>{ const d = new Date(); $("#clock").textContent = d.toLocaleString(); };
  clock(); setInterval(clock, 1000);

  // Theme
  $("#theme").onclick = ()=>{
    state.theme = state.theme==="dark"?"light":"dark";
    document.documentElement.setAttribute("data-theme", state.theme);
    localStorage.setItem("home.theme", state.theme);
  };
  addEventListener("keydown", e=>{ if(e.key==="F2"){ e.preventDefault(); $("#theme").click(); }});

  // Notes
  const noteEl = $("#note"); noteEl.value = state.note;
  $("#saveNote").onclick = saveNote;
  setInterval(saveNote, 3000);
  function saveNote(){ state.note = noteEl.value; localStorage.setItem("home.note", state.note); }

  // Links
  const linkList = $("#linkList");
  function renderLinks(){
    linkList.innerHTML = "";
    state.links.forEach((l,i)=>{
      const li = document.createElement("li");
      li.className="row";
      li.innerHTML = \`<span class="pill"><span class="status ok"></span>\${l.title}</span>
        <a class="btn" href="\${l.url}" target="_blank" rel="noopener">Abrir</a>
        <button data-i="\${i}" class="del">Remover</button>\`;
      linkList.appendChild(li);
    });
    $all(".del", linkList).forEach(b=>b.onclick = ()=>{ state.links.splice(+b.dataset.i,1); persist("links"); renderLinks(); });
  }
  function persist(k){ localStorage.setItem("home."+k, JSON.stringify(state[k])); }
  renderLinks();
  $("#addLink").onclick = ()=>{
    const title = $("#linkTitle").value.trim();
    const url = $("#linkUrl").value.trim();
    if(!title||!url) return;
    state.links.push({title,url});
    persist("links"); renderLinks();
    $("#linkTitle").value=""; $("#linkUrl").value="";
  };
  addEventListener("keydown", e=>{
    if(e.key==="/"){ e.preventDefault(); $("#linkTitle").focus(); }
  });

  // Snippets
  const snipSelect = $("#snipSelect");
  const snipCode = $("#snipCode");
  function renderSnipSelect(){
    snipSelect.innerHTML="";
    state.snips.forEach((s,i)=>{
      const opt = document.createElement("option"); opt.value=i; opt.textContent=s.name; snipSelect.appendChild(opt);
    });
  }
  function renderSnipList(){
    const ul = $("#snipList"); ul.innerHTML="";
    state.snips.forEach((s,i)=>{
      const li = document.createElement("li");
      li.innerHTML = \`<div class="row"><span class="pill"><span class="status warn"></span>\${s.name}</span>
      <button data-i="\${i}" class="load">Carregar</button>
      <button data-i="\${i}" class="remove">Excluir</button></div>\`;
      ul.appendChild(li);
    });
    $all(".load", ul).forEach(b=>b.onclick=()=>{ snipSelect.value=b.dataset.i; snipCode.value=state.snips[b.dataset.i].code; });
    $all(".remove", ul).forEach(b=>b.onclick=()=>{ state.snips.splice(+b.dataset.i,1); persist("snips"); renderSnipSelect(); renderSnipList(); });
  }
  $("#saveSnip").onclick = ()=>{
    const name = prompt("Nome do snippet:"); if(!name) return;
    state.snips.push({name, code: snipCode.value}); persist("snips"); renderSnipSelect(); renderSnipList();
  };
  $("#runSnip").onclick = ()=>{
    try{ new Function(snipCode.value)(); }catch(err){ alert(err.message); }
  };
  renderSnipSelect(); renderSnipList();

  // Kanban
  const cols = $all(".col");
  function renderKanban(){
    cols.forEach(col=>{
      const key = col.dataset.col; col.querySelectorAll(".task").forEach(n=>n.remove());
      state.kanban[key].forEach((t,idx)=>{
        const el=document.createElement("div"); el.className="task"; el.textContent=t; el.draggable=true;
        el.addEventListener("dragstart", ev=>{ ev.dataTransfer.setData("text/plain", JSON.stringify({from:key,index:idx,txt:t})); });
        col.appendChild(el);
      });
    });
  }
  renderKanban();
  $("#addTask").onclick = ()=>{
    const v=$("#taskText").value.trim(); if(!v) return;
    state.kanban.todo.push(v); persist("kanban"); renderKanban(); $("#taskText").value="";
  };
  cols.forEach(col=>{
    col.addEventListener("dragover", e=>e.preventDefault());
    col.addEventListener("drop", e=>{
      e.preventDefault();
      const data = JSON.parse(e.dataTransfer.getData("text/plain"));
      if(!data) return;
      state.kanban[data.from].splice(data.index,1);
      state.kanban[col.dataset.col].push(data.txt);
      persist("kanban"); renderKanban();
    });
  });

  // Ping
  $("#doPing").onclick = async()=>{
    const url = $("#pingUrl").value.trim(); if(!url) return;
    const start = performance.now();
    let ok=true, status=0, size=0;
    try{
      const res = await fetch(url, {method:"GET", mode:"no-cors", cache:"no-store"});
      // no-cors oculta status; marcamos como ok se não explodiu
      status = res.status||0;
    }catch(e){ ok=false; }
    const ms = Math.round(performance.now()-start);
    const tr = document.createElement("tr");
    tr.innerHTML = \`
      <td>\${new Date().toLocaleTimeString()}</td>
      <td>\${url}</td>
      <td><span class="pill"><span class="status \${ok?"ok":"bad"}"></span>\${ok?"OK":"Falhou"}</span></td>
      <td>\${ms} ms</td>\`;
    $("#pingTable").prepend(tr);
  };

  // Paleta
  $("#genPalette").onclick = ()=>{
    const base = $("#baseColor").value;
    const chips = $("#chipArea"); chips.innerHTML="";
    const shades = genShades(base);
    shades.forEach(hex=>{
      const d=document.createElement("div"); d.className="chip"; d.style.background=hex; d.style.borderColor="rgba(0,0,0,.2)";
      d.textContent=hex; d.title="copiar";
      d.onclick = ()=>{ navigator.clipboard.writeText(hex); };
      chips.appendChild(d);
    });
  };
  function genShades(hex){
    const {r,g,b}=hexToRgb(hex);
    const out=[]; for(let i=0;i<10;i++){ const f=.1*i; out.push(rgbToHex(
      Math.round(r+(255-r)*f),
      Math.round(g+(255-g)*f),
      Math.round(b+(255-b)*f))); }
    return out;
  }
  function hexToRgb(h){ const m = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h); return m?{r:parseInt(m[1],16),g:parseInt(m[2],16),b:parseInt(m[3],16)}:{r:0,g:0,b:0}; }
  function rgbToHex(r,g,b){ return "#" + [r,g,b].map(x=>x.toString(16).padStart(2,"0")).join(""); }

  // Projeto rápido editor + preview + download
  const htmlEl = $("#projHtml");
  const jsEl = $("#projJs");
  const frame = $("#projPreview");
  const nameEl = $("#projName");
  const dlLink = $("#dlLink");

  htmlEl.value = `<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Demo</title>
  <style>body{font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial; padding:20px}</style>
</head>
<body>
  <h1>Olá Dev</h1>
  <p>Edite o HTML e o JS. Use Ctrl/⌘+Enter.</p>
  <button id="btn">Clique</button>
</body>
</html>`;

  jsEl.value = `document.getElementById("btn").addEventListener("click",()=>{
  alert("Funcionou");
});`;

  function runProject(){
    const code = htmlEl.value.replace("</body>", \`<script>\${jsEl.value.replace(/<\\/script>/g,"<\\\\/script>")}<\\/script></body>\`);
    frame.srcdoc = code;
    localStorage.setItem("home.quick.html", htmlEl.value);
    localStorage.setItem("home.quick.js", jsEl.value);
  }
  $("#makeFile").onclick = ()=>{
    const name = (nameEl.value.trim()||"demo.html").replace(/[^a-z0-9_.-]/gi,"_");
    const code = htmlEl.value.replace("</body>", \`<script>\${jsEl.value.replace(/<\\/script>/g,"<\\\\/script>")}<\\/script></body>\`);
    const blob = new Blob([code], {type:"text/html;charset=utf-8"});
    const url = URL.createObjectURL(blob);
    dlLink.href = url; dlLink.download = name; dlLink.hidden=false; dlLink.textContent = "Baixar "+name;
  };
  addEventListener("keydown", e=>{
    if((e.ctrlKey||e.metaKey) && e.key==="Enter"){ e.preventDefault(); runProject(); }
    if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==="s"){ e.preventDefault(); $("#makeFile").click(); dlLink.click(); }
  });

  // Restaurar
  const h = localStorage.getItem("home.quick.html"); if(h) htmlEl.value = h;
  const j = localStorage.getItem("home.quick.js"); if(j) jsEl.value = j;
  runProject();

  // Import/Export
  $("#exportData").onclick = ()=>{
    const data = {
      theme: state.theme,
      note: state.note,
      links: state.links,
      snips: state.snips,
      kanban: state.kanban,
      quick: { html: htmlEl.value, js: jsEl.value }
    };
    const blob = new Blob([JSON.stringify(data,null,2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "home-dev-export.json";
    a.click();
  };
  $("#importFile").addEventListener("change", async(e)=>{
    const f = e.target.files[0]; if(!f) return;
    const text = await f.text();
    try{
      const data = JSON.parse(text);
      if(data.theme){ state.theme = data.theme; document.documentElement.setAttribute("data-theme", state.theme); localStorage.setItem("home.theme", state.theme); }
      if("note" in data){ state.note = data.note; noteEl.value = state.note; localStorage.setItem("home.note", state.note); }
      if(Array.isArray(data.links)){ state.links = data.links; persist("links"); renderLinks(); }
      if(Array.isArray(data.snips)){ state.snips = data.snips; persist("snips"); renderSnipSelect(); renderSnipList(); }
      if(data.kanban){ state.kanban = data.kanban; persist("kanban"); renderKanban(); }
      if(data.quick){ htmlEl.value = data.quick.html||htmlEl.value; jsEl.value = data.quick.js||jsEl.value; runProject(); }
      alert("Importado");
    }catch(err){ alert("Falha ao importar: "+err.message); }
  });

  // Limpar
  $("#clearLocal").onclick = ()=>{
    if(confirm("Limpar todos os dados salvos?")){
      ["home.theme","home.note","home.links","home.snips","home.kanban","home.quick.html","home.quick.js"].forEach(k=>localStorage.removeItem(k));
      location.reload();
    }
  };
})();
</script>
</body>
</html>
